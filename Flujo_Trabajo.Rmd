---
title: "Flujo_Trabajo_POF2025"
author: "Juan Carlos Ramirez Gil"
date: "2025-11-05"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduccion

Este c√≥digo corresponde a u an√°lisis estad√≠stico de la diversidad par aves y mam√≠feros en la parte alta de cuenca del rio zulia en el departamento de norte de Santander como parte del Proyecto de Ordenaci√≥n Forestal del mismo, el siguiente c√≥digo integra Python desde R Studio para crear un c√≥digo de an√°lisis reproducible y moderno que permita ahorrar el trabajo de an√°lisis en proyectos futuros.

## Crear repositorio en GitHub para guardar el proyecto

El proyecto sera guardado en un repositorio de github para poder darle trazabilidad al mismo y compartirlo libremente

```{github}
# ============================================================
# üîó CONFIGURAR GIT Y GITHUB DESDE RSTUDIO
# ============================================================

# 1Ô∏è‚É£ Instalar e importar el paquete necesario
#install.packages("usethis")
library(usethis)

# ------------------------------------------------------------
# 2Ô∏è‚É£ CONFIGURAR TU IDENTIDAD DE GIT
# (Estos datos deben coincidir con tu cuenta de GitHub)
# ------------------------------------------------------------
use_git_config(
  user.name = "BioRamirez",                    # tu nombre de usuario de GitHub
  user.email = "bioramirezjuan@gmail.com"      # el correo vinculado a GitHub
)

# Puedes verificar si Git est√° correctamente instalado en tu PC
system("git --version")   # o desde la terminal de RStudio: git --version


# ============================================================
# 3Ô∏è‚É£ CREAR UN TOKEN PERSONAL DE ACCESO (PAT)
# ============================================================

# Esto abrir√° tu navegador para crear un token con permisos "repo"
usethis::create_github_token(scopes = c("repo"))

# üëâ En GitHub, copia el token (algo como: ghp_sD7xKfLZtPq6...)

# ============================================================
# 4Ô∏è‚É£ GUARDAR EL TOKEN EN TU SISTEMA DE R
# ============================================================

# Esto abrir√° tu archivo .Renviron
usethis::edit_r_environ()

# üí° En el archivo que se abre, pega una l√≠nea como esta (sin comillas):
# GITHUB_PAT=ghp_tuTokenLargoQueCopiasteDeGitHub
# Guarda y cierra el archivo, luego REINICIA RStudio.

# ============================================================
# 5Ô∏è‚É£ VERIFICAR QUE R RECONOZCA TU TOKEN
# ============================================================
Sys.getenv("GITHUB_PAT")
# ‚úÖ Debe mostrar tu token (o al menos empezar con "ghp_").
# Si devuelve "", vuelve a editar el .Renviron y revisa la sintaxis.


# ============================================================
# 6Ô∏è‚É£ INICIALIZAR GIT EN TU PROYECTO LOCAL
# ============================================================

# üìÅ Aseg√∫rate de estar dentro del proyecto que deseas conectar
# Si no tienes un proyecto abierto, crea uno nuevo en RStudio (File > New Project)
usethis::use_git()

# üëâ Esto crea la carpeta .git y un archivo .gitignore
# RStudio puede pedirte reiniciar; hazlo.


# ============================================================
# 7Ô∏è‚É£ CREAR Y VINCULAR REPOSITORIO EN GITHUB
# ============================================================

# Esto crear√° autom√°ticamente un repositorio en GitHub
# y lo enlazar√° con tu proyecto local
usethis::use_github()

# üî∏ Se har√° un commit inicial y se subir√° el c√≥digo a GitHub.
# üî∏ Se abrir√° el repositorio en tu navegador.


# ============================================================
# 8Ô∏è‚É£ VERIFICAR LA CONEXI√ìN
# ============================================================

system("git remote -v")

# Debes ver algo como:
# origin  https://github.com/BioRamirez/NombreDeTuRepo.git (fetch)
# origin  https://github.com/BioRamirez/NombreDeTuRepo.git (push)


# ============================================================
# 9Ô∏è‚É£ SUBIR CAMBIOS FUTUROS
# ============================================================
system('git config --global --list')
user.name=BioRamirez
user.email=bioramirezjuan@gmail.com

system('git config --global --list')

# Despu√©s de modificar tu proyecto, ejecuta:
system("git add .")                         # A√±ade todos los archivos
system('git commit -m "Actualizaci√≥n de an√°lisis"')  # Describe el cambio
system("git push")                          # Sube los cambios a GitHub

# O puedes usar el panel Git en RStudio (arriba a la derecha).


# ============================================================
# üß† EXTRA: VERIFICAR ESTADO DE GIT EN CUALQUIER MOMENTO
# ============================================================
system("git status")

#----------------------------------------------------Iniciar Python en R studio--------------------------

system("python --version")

#Instalar paquete para ejecutar python en R studio
#install.packages("reticulate")
library(reticulate)

py_config()

#---------------------------------------------------------------------------------------------------------

```

# Analisis de datos
Se lee el archivo con los registros y los datos ecol√≥gicos desde un xlsx en el ordenador donde se realiza el an√°lisis

Hay que recordar que se trabajara desde python, utilizando pandas y leyendo archivos xlsx, para esto se aplica el paquete reticulate para trbajar python desde r studio.

```{r}
library(reticulate)

# Instalar pandas y openpyxl si a√∫n no los tienes
#py_install(c("pandas", "openpyxl"))

# Ejecutar c√≥digo Python desde R
py_run_string("
import pandas as pd

# Leer el archivo Excel
Registros = pd.read_excel('D:/CORPONOR 2025/FOTOS/POF_ZULIA_2025_BD_AVES_MAMIFEROS.xlsx')

# Mostrar las primeras filas
print(Registros.head())
")

# Tambi√©n puedes traer el DataFrame a R si lo necesitas:
Registros <- py$Registros
View(Registros)
```

## Ver tabla de registros

```{python}
print(Registros.head())
```

# Metodologia


A continuaci√≥n, se describen los an√°lisis realizados sobre la informaci√≥n obtenida durante el muestreo de fauna.
Riqueza de especies.

Para el presente estudio, la diversidad o riqueza de especies es definida como el n√∫mero de especies en la zona de estudio, de este modo, y con el fin de hacer una determinaci√≥n gr√°fica, se discrimin√≥ la totalidad de especies registrados en jerarqu√≠as taxon√≥micas (Orden, Familia, G√©nero, Especie), con el objetivo de identificar el grado de representatividad de cada una.

## Curvas de acumulaci√≥n de especies
En general, para evaluar la representatividad de los muestreos, se emple√≥ la curva de acumulaci√≥n de especies para cada una de las coberturas muestreadas, que representa el n√∫mero de especies acumulado en el inventario frente al esfuerzo de muestreo realizado. De esta manera, la curva de acumulaci√≥n es la representaci√≥n gr√°fica de la cantidad de las especies que van apareciendo en el muestreo. Los c√°lculos se realizaron utilizando R Studio y Python, disponible en l√≠nea. Para determinar la eficiencia de estos muestreos, se utilizaron los estimadores como ACE, Chao de primer orden, Jacknife 1 o Bootstrap, los cuales arrojan resultados m√°s precisos al estimar la riqueza de ensamblajes con gran cantidad de especies ‚Äúraras".

## Diversidad alfa
Para este an√°lisis se utiliz√≥ R Studio y Python con el fin de realiza los an√°lisis de dominancia de Simpson, equitatividad de Pielou y diversidad de Shannon), los cuales nos indican la diversidad de especies de una comunidad particular a la que consideramos homog√©nea.

## √çndice de Simpson (Ds)
Expresa la probabilidad de extraer de la comunidad dos (2) individuos capturados al azar que pertenezcan a la misma especie. Es una medida de cuan dominante es una especie, de esta manera las especies comunes tiene mucho peso respecto a las especies raras. Oscila entre 0 y (1-1/S.

## √çndice de Shannon (H¬¥)
El √≠ndice de Shannon-Wiener es uno de los √≠ndices de medida m√°s simples y de uso m√°s extenso, que mide el grado promedio de incertidumbre para predecir la especie a la que pertenece un individuo dado, elegido al azar dentro de la comunidad. Mide la variedad de especies de un √°rea determinada, indicando su diversidad y frecuencia; una alta diversidad indica un alto grado de desarrollo y estabilidad de la biota; se basa en la abundancia proporcional de las especies como en su riqueza; se incrementa con el n√∫mero de especies y el n√∫mero de individuos.

## √çndice de equitatividad de Pielou (J)
El √çndice de equitatividad de Pielou (J‚Äô) mide la proporci√≥n de la diversidad observada con relaci√≥n a la m√°xima diversidad esperada. Su valor va de cero a uno de forma que uno corresponde a situaciones donde todas las especies son igualmente abundantes. Esta medida al igual que Shannon considera que todas las especies de la comunidad se han contabilizado en la muestra.

## Curvas rango abundancia
Para comparar la abundancia y la uniformidad de especies entre las diferentes unidades muestrales, se realizaron gr√°ficas de rango abundancia, siendo ampliamente utilizadas en estudios de caracterizaci√≥n de fauna.

## Gremios tr√≥ficos
Los gremios tr√≥ficos se definieron como omn√≠voro (consumo de material vegetal, animal y alimentos procesados), Insect√≠voro (consumo de insectos), Fol√≠voro (consumo de hojas), Gran√≠voro (consumo de granos y semillas), Herb√≠voro (consumo de vegetales), Hemat√≥fagos (consumo de sangre), Frug√≠voro (consumo de frutos), carn√≠voro (consumo de carne de otros animales), Nectar√≠voro (consumo del n√©ctar de las flores), Pisc√≠voro (consumo de peces) y Carro√±ero (consumo de cad√°veres de animales). La caracterizaci√≥n tr√≥fica, se realiz√≥ en base a los resultados de abundancia relativa, para facilitar la cuantificaci√≥n de la misma.

## Especies sensibles
Posterior a esto, se evaluaron las especies sensibles presentes en las CNAS del proyecto. Estas especies se reconocen como todas aquellas que, debido a alguna caracter√≠stica ecol√≥gica o poblacional, son m√°s perceptivas al cambio ambiental que producen las actividades antr√≥picas. A partir de esto, fueron analizadas aquellas especies que han sido catalogadas como amenazadas de extinci√≥n, para lo cual se tuvieron en cuenta las categor√≠as establecidas a nivel global por la Uni√≥n Internacional para la Conservaci√≥n de la Naturaleza UICN (2021), y a nivel nacional por la Resoluci√≥n 0126 de 2024 del MADS. As√≠ mismo, se analizaron aquellas especies que presentan restricci√≥n en su comercio a trav√©s de la lista de la Convenci√≥n sobre el Comercio Internacional de Especies Amenazadas de Fauna y Flora Silvestres (CITES), aquellas que tuvieran rangos de distribuci√≥n muy peque√±os o restringidos (end√©micas) y las especies con alg√∫n patr√≥n de migraci√≥n dentro del territorio, para lo cual fue evaluado el Plan Nacional de especies Migratorias de Naranjo y Amaya y Naranjo et al.   y la Gu√≠a de las especies migratorias de la biodiversidad en Colombia de Amaya-Espinel y Zapata.

Siguiendo los criterios establecidos por la Uni√≥n Internacional para la Conservaci√≥n de la naturaleza (IUCN), las categor√≠as de amenaza han sido definidas como:

En Peligro Cr√≠tico (CR): en esta categor√≠a se incluyen las especies que enfrentan un riesgo extremadamente alto de extinci√≥n en estado silvestre, en el futuro inmediato.

En Peligro (EN): esta categor√≠a incluye las especies que no est√°n en ‚Äúpeligro cr√≠tico‚Äù, pero est√°n enfrentando un muy alto riesgo de extinci√≥n o deterioro poblacional en estado silvestre, en el futuro cercano.

Vulnerables (VU): un tax√≥n est√° en la categor√≠a de VU, cuando la mejor evidencia disponible indica que enfrenta un moderado riesgo de extinci√≥n o deterioro poblacional a mediano plazo.

Las especies amparadas por la Convenci√≥n sobre el Comercio Internacional de Especies Amenazadas de Fauna y Flora Silvestres (CITES), se encuentran incluidas en tres ap√©ndices seg√∫n el grado de protecci√≥n que necesiten, los cuales se describen a continuaci√≥n:

Ap√©ndice I: Incluye todas las especies en peligro de extinci√≥n, y el comercio de esas especies se autorizar√° solamente bajo circunstancias excepcionales. 

Ap√©ndice II: Incluye las especies que no se encuentran necesariamente en peligro de extinci√≥n, pero cuyo comercio debe controlarse a fin de evitar una utilizaci√≥n incompatible con su supervivencia. 

Ap√©ndice III: Incluye especies que est√°n protegidas al menos en un pa√≠s, el cual ha solicitado la asistencia de otras partes de las CITES para controlar su comercio.


Los an√°lisis y gr√°ficos se realizaron con los softwares libres R Studio, Python y una hoja de c√°lculo de Microsoft Excel. 

